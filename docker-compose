version: '2'
services:
  nginx-proxy:
    image: jwilder/nginx-proxy:latest
    restart: always
    volumes:
      - /var/run/docker.sock:/tmp/docker.sock:ro
    ports:
      - "80:80"
  nginx-php:
    image: xxstop/nginxphp
    restart: always
    volumes:
      ../nginx.php/data:/data
      ../nginx.php/etc/nginx/site-available:/etc/nginx/site-available
      ../nginx.php/scripts:/usr/local/scripts
      ../nginx.php/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf
    links:
      mariadb: mariadb.xxstop.dev
  mariadb:
    image: xxstop/mariadb
    restart: always
    volumes:
      ../mariadb/scripts:/usr/local/scripts
      ../mariadb/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf
  dnsmasq:
    image: xxstop/dnsmasq
    restart: always
    volumes:
      ../dnsmasq/etc/associate.d:/etc/associate.d
      ../dnsmasq/etc/dnsmasq.d:/etc/dnsmasq.d
      ../dnsmasq/etc/dnsmasq.conf:/etc/dnsmasq.conf
      ../dnsmasq/supervisord.conf:/etc/supervisor/conf.d/supervisord.conf
    ports:
      - "53:53"
    
